/**
 * Helper that hides the fallback select and delegates to the autocomplete enhancer.
 *
 * @module     mod_bigbluebuttonbn/multiselect_tags
 * @copyright  2025 Blindside Networks Inc
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 * @author     Jesus Federico  (jesus [at] blindsidenetworks [dt] com)
 */
define("mod_bigbluebuttonbn/multiselect_tags",["jquery","core/form-autocomplete"],(function($,autocomplete){return{init:function(selector){const args=Array.prototype.slice.call(arguments),$select=$(selector);return autocomplete.enhance.apply(autocomplete,args).then((function(){var processOptions=function(){var existingValues={};$select.find("option:not([data-iscustom])").each((function(){var val=$(this).attr("value");val&&(existingValues[val.toLowerCase()]=!0)}));var toRemove=[];$select.find("option[data-iscustom]").each((function(){var $opt=$(this),val=$opt.attr("value");if(val){var normalized=val.toLowerCase();if(existingValues[normalized])toRemove.push({opt:$opt,val:val});else{existingValues[normalized]=!0;var display=normalized.replace(/[_-]/g," ").replace(/\s+/g," ").trim();display=display.replace(/\b\w/g,(function(c){return c.toUpperCase()})),$opt.attr("value",normalized),$opt.text(display);var $pill=$select.parent().find('.form-autocomplete-selection [data-value="'+val+'"]');if($pill.length){$pill.attr("data-value",normalized);var $labelNode=$pill.contents().filter((function(){return 3===this.nodeType})).last();$labelNode.length&&($labelNode[0].nodeValue=" "+display)}}}})),toRemove.forEach((function(item){item.opt.remove(),$select.parent().find('.form-autocomplete-selection [data-value="'+item.val+'"]').remove()}))};return $select.on("change",(function(){setTimeout(processOptions,0)})),processOptions(),$select}))}}}));

//# sourceMappingURL=multiselect_tags.min.js.map