{"version":3,"file":"recordings_pagination.min.js","sources":["../src/recordings_pagination.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Pagination module for the recordings table.\n *\n * @module     mod_bigbluebuttonbn/recordings_pagination\n * @copyright  2025 Blindside Networks\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport {getString} from 'core/str';\n\n/**\n * Initializes pagination functionality for the recordings table.\n */\nexport const setupPagination = () => {\n    const tableContainer = document.querySelector(\".mod_bigbluebuttonbn_recordings_table\");\n    if (!tableContainer) {\n        return;\n    }\n\n    const rows = Array.from(tableContainer.querySelectorAll(\".row.mb-3.align-items-center\"));\n\n    // Select pagination buttons.\n    const firstPageBtn = document.getElementById(\"firstPage\");\n    const prevPageBtn = document.getElementById(\"prevPage\");\n    const nextPageBtn = document.getElementById(\"nextPage\");\n    const lastPageBtn = document.getElementById(\"lastPage\");\n    const pageSelect = document.getElementById(\"pageSelect\");\n\n    if (!firstPageBtn || !prevPageBtn || !nextPageBtn || !lastPageBtn || !pageSelect) {\n        return;\n    }\n\n    const itemsPerPage = 10;\n    let currentPage = 1;\n    let totalPages = Math.ceil(rows.length / itemsPerPage);\n\n    /**\n     * Updates the visibility of table rows based on the selected page.\n     * @param {number} page - The current page to display.\n     */\n    function renderTable(page) {\n        rows.forEach((row, index) => {\n            if (index >= (page - 1) * itemsPerPage && index < page * itemsPerPage) {\n                row.style.display = \"flex\";\n            } else {\n                row.style.display = \"none\";\n            }\n        });\n    }\n\n    /**\n     * Updates pagination buttons and dropdown.\n     */\n    async function updatePaginationControls() {\n        pageSelect.innerHTML = \"\";\n\n        let pageString;\n        try {\n            pageString = await getString('view_recording_yui_page', 'bigbluebuttonbn');\n        } catch (error) {\n            pageString = \"Page\";\n        }\n\n        for (let i = 1; i <= totalPages; i++) {\n            let option = document.createElement(\"option\");\n            option.value = i;\n            option.textContent = `${pageString} ${i}`;\n            if (i === currentPage) {\n                option.selected = true;\n            }\n            pageSelect.appendChild(option);\n        }\n\n        firstPageBtn.disabled = (currentPage === 1);\n        prevPageBtn.disabled = (currentPage === 1);\n        nextPageBtn.disabled = (currentPage === totalPages);\n        lastPageBtn.disabled = (currentPage === totalPages);\n    }\n\n    /**\n     * Event listeners for first page in pagination controls.\n     */\n    firstPageBtn.addEventListener(\"click\", () => {\n        currentPage = 1;\n        renderTable(currentPage);\n        updatePaginationControls();\n    });\n\n    /**\n     * Event listeners for previous page in pagination controls.\n     */\n    prevPageBtn.addEventListener(\"click\", () => {\n        if (currentPage > 1) {\n            currentPage--;\n            renderTable(currentPage);\n            updatePaginationControls();\n        }\n    });\n\n    /**\n     * Event listeners for next page in pagination controls.\n     */\n    nextPageBtn.addEventListener(\"click\", () => {\n        if (currentPage < totalPages) {\n            currentPage++;\n            renderTable(currentPage);\n            updatePaginationControls();\n        }\n    });\n\n    /**\n     * Event listeners for last page in pagination controls.\n     */\n    lastPageBtn.addEventListener(\"click\", () => {\n        currentPage = totalPages;\n        renderTable(currentPage);\n        updatePaginationControls();\n    });\n\n    /**\n     * Event listeners for page selection dropdown.\n     */\n    pageSelect.addEventListener(\"change\", (e) => {\n        currentPage = parseInt(e.target.value, 10);\n        renderTable(currentPage);\n        updatePaginationControls();\n    });\n\n    renderTable(currentPage);\n    updatePaginationControls();\n};\n"],"names":["tableContainer","document","querySelector","rows","Array","from","querySelectorAll","firstPageBtn","getElementById","prevPageBtn","nextPageBtn","lastPageBtn","pageSelect","currentPage","totalPages","Math","ceil","length","renderTable","page","forEach","row","index","style","display","updatePaginationControls","pageString","innerHTML","error","i","option","createElement","value","textContent","selected","appendChild","disabled","addEventListener","e","parseInt","target"],"mappings":"oNA4B+B,WACrBA,eAAiBC,SAASC,cAAc,6CACzCF,4BAICG,KAAOC,MAAMC,KAAKL,eAAeM,iBAAiB,iCAGlDC,aAAeN,SAASO,eAAe,aACvCC,YAAcR,SAASO,eAAe,YACtCE,YAAcT,SAASO,eAAe,YACtCG,YAAcV,SAASO,eAAe,YACtCI,WAAaX,SAASO,eAAe,mBAEtCD,cAAiBE,aAAgBC,aAAgBC,aAAgBC,uBAKlEC,YAAc,EACdC,WAAaC,KAAKC,KAAKb,KAAKc,OAFX,aAQZC,YAAYC,MACjBhB,KAAKiB,SAAQ,CAACC,IAAKC,SAEXD,IAAIE,MAAMC,QADVF,OAVS,IAUCH,KAAO,IAAqBG,MAV7B,GAUqCH,KAC1B,OAEA,yBAQjBM,+BAGPC,WAFJd,WAAWe,UAAY,OAInBD,iBAAmB,kBAAU,0BAA2B,mBAC1D,MAAOE,OACLF,WAAa,WAGZ,IAAIG,EAAI,EAAGA,GAAKf,WAAYe,IAAK,KAC9BC,OAAS7B,SAAS8B,cAAc,UACpCD,OAAOE,MAAQH,EACfC,OAAOG,sBAAiBP,uBAAcG,GAClCA,IAAMhB,cACNiB,OAAOI,UAAW,GAEtBtB,WAAWuB,YAAYL,QAG3BvB,aAAa6B,SAA4B,IAAhBvB,YACzBJ,YAAY2B,SAA4B,IAAhBvB,YACxBH,YAAY0B,SAAYvB,cAAgBC,WACxCH,YAAYyB,SAAYvB,cAAgBC,WAM5CP,aAAa8B,iBAAiB,SAAS,KACnCxB,YAAc,EACdK,YAAYL,aACZY,8BAMJhB,YAAY4B,iBAAiB,SAAS,KAC9BxB,YAAc,IACdA,cACAK,YAAYL,aACZY,+BAORf,YAAY2B,iBAAiB,SAAS,KAC9BxB,YAAcC,aACdD,cACAK,YAAYL,aACZY,+BAORd,YAAY0B,iBAAiB,SAAS,KAClCxB,YAAcC,WACdI,YAAYL,aACZY,8BAMJb,WAAWyB,iBAAiB,UAAWC,IACnCzB,YAAc0B,SAASD,EAAEE,OAAOR,MAAO,IACvCd,YAAYL,aACZY,8BAGJP,YAAYL,aACZY"}